language: d

sudo: true

addons:
  apt:
    sources:
      - debian-sid

    packages:
      - libssl1.0.0
      - libsqlite3-0
      - libsqlite3-dev
      - libscrypt0
      - libscrypt-dev
      - libminiupnpc10
      - libminiupnpc-dev

install:
  - dub fetch dscanner
  - dub fetch doveralls

script:
  - if [ ${DC} = "dmd" ]; then dub run dscanner -s --config=.dscanner.ini; fi
  - if [ ${DC} = "dmd" ]; then dub run dscanner -S --config=.dscanner.ini; fi
  - dub test --coverage --combined --debug=PoWt

after_success:
  - dub run doveralls
